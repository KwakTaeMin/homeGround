<%@page import="result.ResultVO"%>
<%@page import="result.ResultDAO"%>
<%@page import="notice.NoticeVO"%>
<%@page import="java.util.List"%>
<%@page import="notice.NoticeDAO"%>
<%@page import="team.TeamVO"%>
<%@page import="member.MemberVO"%>
<%@page import="team.TeamDAO"%>
<%@page import="member.MemberDAO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title> HomeGround :: MainPage </title>
<style type="text/css">
h3 {position: relative;}
h3 span {position: absolute; right: 0; font-size:15px;}
</style>

<link rel= "stylesheet" href= "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" >
<link rel ="stylesheet" href= "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" >
<script src= "https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" ></script >
<script src= "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" ></script >

<%
	MemberDAO 	memberDao	 	= 	new MemberDAO();
	TeamDAO   	teamDao 		= 	new TeamDAO();
	NoticeDAO 	noticeDao		= 	new NoticeDAO();
	ResultDAO	resultDao		= 	new ResultDAO();
	
	
	
	String memId				=   (String)session.getAttribute("memId");
	int	   teamNo				= 	(Integer)session.getAttribute("teamNo");
	//userVo.getTeamNo()
	MemberVO 	userVo			= 	memberDao.getMemberInfoById(memId);
	TeamVO 		userTeamVo 		= 	teamDao.getTeamByNo(userVo.getTeamNo());	

	String 		coachName 		= 	teamDao.getTeamCoachName(userTeamVo.getCoachNo());
	int 		teamCount		= 	memberDao.getAllMemberCountByTeamNo(userTeamVo.getCoachNo());
	
	System.out.println(teamNo);
	
	List<NoticeVO> noticeList 	= (List)noticeDao.getNoticeRange(1, 8, teamNo);
	List<ResultVO> resultList 	= (List)resultDao.getResultByRange(1, 6, teamNo);
	
%>


</head>
<body>

<!-- 팀정보  -->

<div class="container">

	<!-- 네비게이션 -->
	<nav class="navbar navbar-default">	
	    <div class="navbar-header">
	      <a class="navbar-brand" href="#">홈 그라운드</a>
	    </div>
	    <div>
	      <ul class="nav navbar-nav">
	        <li class="active"><a href="#"> 팀명 :<%=userTeamVo.getName() %></a></li>			        
	      </ul>
	      
	      <form class="navbar-form navbar-left" role="search">
	        <div class="form-group">
	          <input type="text" class="form-control" placeholder="팀명을 검색하세요">
	        </div>
	        <button type="submit" class="btn btn-default">검색</button>
	      </form>
	   </div>
	</nav>
	
	
	<div class="row">	
			
		<div class="col-md-4">	
			<h3> 사진 </h3>		
			<img src="<%=userTeamVo.getPhoto() %>" class="img-rounded" alt="Main Team Image" width="304" height="236"> 
			<button> 인원 보기 </button>
		</div>
		<div class="col-md-8">
			<h3>팀정보</h3>
			<p> 감독명 : <%=coachName %> </p>
			<p> 인원수 : <%=teamCount %> </p>
			<p> 전적 : [없음] </p>
			<p> 지역 : <%=userTeamVo.getArea() %></p>
			<p> 창단일 : <%=userTeamVo.getRegdate() %></p>
			<p> 팀소개 : <%=userTeamVo.getIntroduce() %></p>
		</div>			
	</div>
	
	<div class="row">
		<div class="col-md-12">
			<button> 팔로우 : [없음] </button>
			<button> 팔로잉 : [없음] </button> 
			<button> [프로필 수정] // [팔로잉하기] </button> <!-- 상대팀에 왔을때는 팔로잉 하기! -->	
		</div>	
	</div>
	
	<div class="row">
		<div class="col-md-12">
			
		</div>
	</div>
	
	<div class="row">
		<div class="col-md-6">
			<h3>공지 사항<span><a href="notice/noticeList.jsp">더보기</a></span></h3>			
			<table class="table table-hover">
				<thead>
					<tr>
						<th>공지 번호  </th>
						<th>제목  </th>
						<th>작성자  </th>
						<th>날짜  </th>	
					</tr>				
				</thead>
				<tbody>
				<% for (int i=0; i<noticeList.size(); i++) { %>
					<tr>
						<td><%=noticeList.get(i).getNo() %></td>
						<td><%=noticeList.get(i).getTitle() %></td>
						<td><%=noticeList.get(i).getMemberName() %></td>
						<td><%=noticeList.get(i).getDate() %></td>
					</tr>
				<%} %>
				</tbody>
			</table>
		</div>
		
		<div class="col-md-6">
			<h3>경기 결과<span><a href="matchResult/resultList.jsp">더보기</a></span></h3>
			<table class="table table-hover">
				<thead>
					<tr>
						<th>경기 글 번호  </th>
						<th>제목  </th>
						<th>날짜  </th>	
					</tr>				
				</thead>
				<tbody>
				<% for (int i=0; i<resultList.size(); i++) { %>
					<tr>
						<td><%=resultList.get(i).getGameNo() %></td>
						<td><%=resultList.get(i).getMyTeamNo() %> <%=resultList.get(i).getMyRuns() %> vs 
							<%=resultList.get(i).getRivalRuns() %> <%=resultList.get(i).getRivalTeamNo() %> </td>
						<td><%=resultList.get(i).getGameDate() %></td>
					</tr>
				<%} %>				
				</tbody>
			</table>
		</div>
		
		<div class="row">
		<div class="col-md-6">
			<h3>자유 게시판<span><a href="#">더보기</a></span></h3>
			<table class="table table-hover">
				<thead>
					<tr>
						<th>게시판 번호  </th>
						<th>제목  </th>
						<th>작성자  </th>
						<th>날짜  </th>	
					</tr>				
				</thead>
				<tbody>
				<% for (int i=0; i<8; i++) { %>
					<tr>
						<td><%=i %></td>
						<td>심심하다..놀아줘 </td>
						<td>곽태민</td>
						<td>2015-06-18 PM9:12</td>
					</tr>
				<%} %>
				</tbody>
			</table>
		</div>
		
		<div class="col-md-6">
			<h3>팔로우 게시판<span><a href="#">더보기</a></span></h3>
			<table class="table table-hover">
				<thead>
					<tr>
						<th>팔로우 글 번호  </th>
						<th>제목  </th>
						<th>작성자  </th>
						<th>날짜  </th>	
					</tr>				
				</thead>
				<tbody>
				<% for (int i=0; i<8; i++) { %>
					<tr>
						<td><%=i %></td>
						<td>우아아아아아 </td>
						<td>조약돌</td>
						<td>2015-06-18 PM9:12</td>
					</tr>
				<%} %>				
				</tbody>
			</table>
		</div>
		
	</div>
	
</div>





</body>
</html>