<%@page import="notice.NoticeVO"%>
<%@page import="java.util.List"%>
<%@page import="notice.NoticeDAO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
	NoticeDAO dao = new NoticeDAO();

	int rowsPerPage = 5;
 	int totalRows = dao.getTotalRow();
 	int totalPages = (int)Math.ceil((double)totalRows/rowsPerPage);
 	
 	int pno = 1;
 	try {
 		pno = Integer.parseInt(request.getParameter("pno"));
 	} catch(NumberFormatException e) {
 		
 	}
 	
 	int start	= 	(pno - 1)*rowsPerPage + 1;
	int end 	= 	pno*rowsPerPage;
	int	teamNo	= 	(Integer)session.getAttribute("teamNo");
	
	List<NoticeVO> list = dao.getNoticeRange(start, end, teamNo);


%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
<h1>공지사항 목록</h1>
<div id="wraaper">
<h2><%=pno %> Page</h2>
<table border="1" style="width: 700px">
<tr>
	<td>번호</td>
	<td width="300">제목</td>
	<td>글쓴이</td>
	<td>좋아요</td>
	<td>날짜</td>
</tr>
<% for(NoticeVO n : list) { 

	int cnt = 0;
%>
<tr>
	<th><%=n.getNo() %></th>
	<th align="left"><a href="noticeDetail.jsp?no=<%=n.getNo()%>&amp;pno=<%=pno%>"><%=n.getTitle() %></a></th>
	<th><%=n.getMemberName() %></th>
	<th><%=n.getLike() %></th>
	<th><%=n.getDate() %></th>
</tr>
<%
}
%>
</table>
<br/>
	<div id="navi">
	<% 
		for(int i=1; i<=totalPages; i++) {
	%>
		<a href="noticeList.jsp?pno=<%=i%>"><%=i %></a>
	<%
		}
	%>
	</div>
</div>
<p><a href="noticeForm.jsp">새 글 작성하기</a></p><br />
</body>
</html>





























