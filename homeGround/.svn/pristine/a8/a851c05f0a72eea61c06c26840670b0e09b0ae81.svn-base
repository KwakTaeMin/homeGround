<%@page import="result.ResultVO"%>
<%@page import="notice.NoticeVO"%>
<%@page import="java.util.List"%>
<%@page import="team.TeamVO"%>
<%@page import="member.MemberVO"%>
<%@page import="result.ResultDAO"%>
<%@page import="notice.NoticeDAO"%>
<%@page import="member.MemberDAO"%>
<%@page import="team.TeamDAO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<%
	request.setCharacterEncoding("utf-8");
	
	String userName = (String)session.getAttribute("memName");

	String otherTeamName = request.getParameter("searchTeamName");
	
	
	TeamDAO 	TeamDao 	= new TeamDAO();	
	MemberDAO 	memberDao	 	= 	new MemberDAO();
	NoticeDAO 	noticeDao		= 	new NoticeDAO();
	ResultDAO	resultDao		= 	new ResultDAO();	
	
	int otherTeamNo	= (Integer)TeamDao.getTeamNoByName(otherTeamName);	
	
	TeamVO 		otherTeamVo		= 	TeamDao.getTeamByNo(otherTeamNo);	
	
	String 		otherCoachName	= 	TeamDao.getTeamCoachName(otherTeamVo.getCoachNo());
	int 		otherTeamCount	= 	memberDao.getAllMemberCountByTeamNo(otherTeamVo.getCoachNo());
	
	System.out.println(otherTeamNo);
	
	List<NoticeVO> otherNoticeList 	= (List)noticeDao.getNoticeRange(1, 8, otherTeamNo);
	List<ResultVO> otherResultList 	= (List)resultDao.getResultByRange(1, 8, otherTeamNo); 
		
	
%>
<link rel= "stylesheet" href= "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" >
<link rel ="stylesheet" href= "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" >
<script src= "https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" ></script >
<script src= "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" ></script >
<title> HomeGround :: <%=otherTeamName %> TeamPage</title>
</head>
<body>
	<!-- 팀정보  -->

<div class="container">

	<!-- 네비게이션 -->
	<nav class="navbar navbar-default">	
	    <div class="navbar-header">
	      <a class="navbar-brand" href="#">홈 그라운드</a>
	    </div>
	    <div>
	      <ul class="nav navbar-nav">
	        <li class="active"><a href="#"> 팀명 :<%=otherTeamVo.getName() %></a></li>			        
	      </ul>
	      <p class="navbar-text"><%=userName %>님 안녕하세요. 환영합니다.</p>
	      <form class="navbar-form navbar-left" role="search" method="post" action="otherTeamPage.jsp">
	        <div class="form-group">
	          <input type="text" class="form-control" name="searchTeamName" placeholder="팀명을 검색하세요">
	        </div>
	        <button type="submit" class="btn btn-default">검색</button>
	      </form>
	   </div>
	</nav>
	

	<div class="row">	
			
		<div class="col-md-4">	
			<h3> 사진 </h3>		
			<img src="<%=otherTeamVo.getPhoto() %>" class="img-rounded" alt="Main Team Image" width="304" height="236">			
		</div>
		<div class="col-md-8">
			<h3>팀정보</h3>
			<p> 감독명 : <%=otherCoachName %> </p>
			<p> 인원수 : <%=otherTeamCount %> </p>
			<p> 전적 : [없음] </p>
			<p> 지역 : <%=otherTeamVo.getArea() %></p>
			<p> 창단일 : <%=otherTeamVo.getRegdate() %></p>
			<p> 팀소개 : <%=otherTeamVo.getIntroduce() %></p>
			<button> 인원 보기 </button>
			<button> 팔로우 : 0 </button>
			<button> 팔로잉 : 0 </button> 
			<button> 프로필 수정 </button> <!-- 상대팀에 왔을때는 팔로잉 하기! -->	
		</div>			
	</div>
	
	<div class="row">
		<div class="col-md-12">
			
		</div>
	</div>
	
	<div class="row">
		<div class="col-md-6">
			<h3>공지 사항<span><a href="notice/noticeList.jsp?teamNo=<%=otherTeamNo %>"">더보기</a></span></h3>			
			<table class="table table-hover">
				<thead>
					<tr>
						<th>공지 번호  </th>
						<th>제목  </th>
						<th>작성자  </th>
						<th>날짜  </th>	
					</tr>				
				</thead>
				<tbody>
				<% for (int i=0; i<otherNoticeList.size(); i++) { %>
					<tr>
						<td><%=otherNoticeList.get(i).getNo() %></td>
						<td><%=otherNoticeList.get(i).getTitle() %></td>
						<td><%=otherNoticeList.get(i).getMemberName() %></td>
						<td><%=otherNoticeList.get(i).getDate() %></td>
					</tr>
				<%} %>
				</tbody>
			</table>
		</div>
		
		<div class="col-md-6">
			<h3>경기 결과<span><a href="matchResult/resultList.jsp?teamNo=<%=otherTeamNo %>">더보기</a></span></h3>
			<table class="table table-hover">
				<thead>
					<tr>
						<th>경기 글 번호  </th>
						<th>제목  </th>
						<th>날짜  </th>	
					</tr>				
				</thead>
				<tbody>
				<% for (int i=0; i<otherResultList.size(); i++) { %>
					<tr>
						<td><%=otherResultList.get(i).getGameNo() %></td>
						<td><%=otherResultList.get(i).getMyTeamNo() %> <%=otherResultList.get(i).getMyRuns() %> vs 
							<%=otherResultList.get(i).getRivalRuns() %> <%=otherResultList.get(i).getRivalTeamNo() %> </td>
						<td><%=otherResultList.get(i).getGameDate() %></td>
					</tr>
				<%} %>				
				</tbody>
			</table>
		</div>
		
		<div class="row">
		<div class="col-md-6">
			<h3>자유 게시판<span><a href="#">더보기</a></span></h3>
			<table class="table table-hover">
				<thead>
					<tr>
						<th>게시판 번호  </th>
						<th>제목  </th>
						<th>작성자  </th>
						<th>날짜  </th>	
					</tr>				
				</thead>
				<tbody>
				<% for (int i=0; i<8; i++) { %>
					<tr>
						<td><%=i %></td>
						<td>심심하다..놀아줘 </td>
						<td>곽태민</td>
						<td>2015-06-18 PM9:12</td>
					</tr>
				<%} %>
				</tbody>
			</table>
		</div>
		
		<div class="col-md-6">
			<h3>팔로우 게시판<span><a href="#">더보기</a></span></h3>
			<table class="table table-hover">
				<thead>
					<tr>
						<th>팔로우 글 번호  </th>
						<th>제목  </th>
						<th>작성자  </th>
						<th>날짜  </th>	
					</tr>				
				</thead>
				<tbody>
				<% for (int i=0; i<8; i++) { %>
					<tr>
						<td><%=i %></td>
						<td>우아아아아아 </td>
						<td>조약돌</td>
						<td>2015-06-18 PM9:12</td>
					</tr>
				<%} %>				
				</tbody>
			</table>
		</div>
		
	</div>
	
</div>

</body>
</html>